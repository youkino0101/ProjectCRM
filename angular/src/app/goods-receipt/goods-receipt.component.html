<div [@routerTransition]>
  <div class="row">
    <div class="col-6">
      <h1>Nhập hàng</h1>
    </div>
  </div>
    <div class="row">
      
      <div class="col-8">
        <div class="container mt-4">
          <div class="form-group">
            <input type="text" class="form-control" [(ngModel)]="searchText" (input)="onSearch()" placeholder="Tìm kiếm mã hoặc tên sản phẩm ...">
          </div>
          <div *ngIf="showDropdown" class="position-absolute" style="width: 94%;">
            <div class="list-group">
              <a *ngFor="let item of searchResults" class="list-group-item list-group-item-action" (click)="addItemToTable(item)">{{ item.productCode }} - {{item.productName}}</a>
            </div>
          </div>
          <div class="table-responsive">
            <table class="table table-striped table-bordered">
              <thead class="bg-light text-center">
                <tr>
                  <th style="width: 110px;">{{ "Product.ProductCode" | localize }}</th>
                  <th style="width: 400px;">{{ "Product.ProductName" | localize }}</th>
                  <th style="width: 80px;">{{ "Product.Quantity" | localize }}</th>
                  <th>{{ "Product.Price" | localize }}</th>
                  <th>{{ "Product.Amount" | localize }}</th>
                  <th style="width: 50px;"></th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="
                  let order of goodsReceiptDetail; let i = index
                ">
                  <td>{{ order.productCode }}</td>
                  <td>{{ order.productName }}</td>
                  <td>
                    <input class="text-right form-control" type="number" min="0" [(ngModel)]="order.quantity" (ngModelChange)="updateTotal(i)">
                  </td>
                  <td>
                    <input class="text-right form-control" type="number" min="0" [(ngModel)]="order.unitPrice" (ngModelChange)="updateTotal(i)">
                  </td>
                  <td class="text-right">{{ order.amount | currency:'VND':'symbol':'1.0-0'}}</td>
                  <td>
                    <button class="btn btn-sm bg-danger mx-2" type="button" (click)="deleteProduct(i)"><i class="fas fa-trash"></i></button>
                  </td>
                </tr>
              </tbody>
            </table>
            <div class="row">
              <div class="col-12">
                <div class="alert alert-info alert-dismissible">
                  <h6><i class="icon fa fa-info"></i>Sản phẩm không tồn tại?</h6><br>
                  <button type="button" (click)="createProduct()" class="btn btn-primary"><i class="fa-solid fa-plus"></i> Thêm sản phẩm</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-4 ">
          <div class="card card-default me-1">
            <div class="card-header">
              <h3 class="card-title">
                <i class="fas fa-tag"></i>
                {{ "RelatedInformation" | localize}}
              </h3>
            </div>
            <div class="card-body">
              <div class="row">
                <label for="customer" class="col-3 col-form-label">{{ "Suppliers" | localize}}: </label>
                <div class="col-9 d-flex">
                  <select id="mySelect1"class="custom-select">
                    <option value="" selected disabled>{{ "SelectAnOption" | localize }}</option>
                  </select>
                  <button type="button" (click)="createSupplier()" class="btn btn-primary"><i class="fa-solid fa-plus"></i></button>
                </div>
              </div>
              
              <div class="row">
                <label for="customer" class="col-3 col-form-label">{{ "Staffs" | localize}}: </label>
                <div class="col">
                  <select class="custom-select" disabled>
                    <option value="" selected>{{ staff.staffName }}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="card card-default mt-4 me-1">
            <div class="card-header">
              <h3 class="card-title">
                <i class="fas fa-info"></i>
                Thông tin thanh toán
              </h3>
            </div>
            <div class="card-body">
              <div class="row ">
                <label for="customer" class="col-3 col-form-label">Thanh toán: </label>
                <div class="form-check d-flex justify-content-between">
                  <input class="form-check-input" type="radio" name="radio1" checked>
                  <label class="form-check-label">Tiền mặt</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="radio1">
                  <label class="form-check-label">Thẻ</label>
                </div>
              </div>
              <div class="row">
                <label for="customer" class="col-3 col-form-label">Tiền hàng: </label>
                <div class="col d-flex justify-content-end">
                  <label class="text-right">{{ totalPrice | currency:'VND':'symbol':'1.0-0'}}</label>
                </div>
              </div>
              <!-- <div class="row">
                <label for="customer" class="col-3 col-form-label">Voucher: </label>
                <div class="col">
                  <input type="text" name="voucher" class="form-control text-right" id="hihi" placeholder="Nhập giảm giá...">
                </div>
              </div> -->
              <div class="row">
                <label for="customer" class="col-3 col-form-label">Tổng cộng: </label>
                <div class="col d-flex justify-content-end">
                  <label class="text-right">{{ totalPrice | currency:'VND':'symbol':'1.0-0'}}</label>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer justify-content-end">
            <button
              type="button"
              class="btn btn-primary"
              (click)="save()"
            >
              Thanh Toán
            </button>
          </div>   
      </div>
    <div>
</div>